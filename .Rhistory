library(ggplot2)
# Clean data
chart_df <- jail_pop %>%
# Focus on Georgia as they have comparable black and white populations
filter(state == "GA", year > 2000) %>%
mutate(other_jail_pop = aapi_jail_pop + native_jail_pop + latinx_jail_pop + other_race_jail_pop) %>%
# Choose columns of white, black, aapi, and native jail pop.
select(year, white_jail_pop, black_jail_pop, other_jail_pop) %>%
# Dropping NA values as they can affect the graph
drop_na()
# Sum the jail populations from all counties in GA
chart_df <- chart_df %>%
group_by(year) %>%
summarise(across(c(white_jail_pop, black_jail_pop, other_jail_pop), sum))
# Combine columns into one column (groups)
chart_df <- chart_df %>%
pivot_longer(cols=c('white_jail_pop', 'black_jail_pop',
'other_jail_pop'),
names_to='race',
values_to='pop')
ggplot(data = chart_df, aes(x = year, y = pop, group = race)) +
geom_line(aes(color = race), linewidth = 0.7) +
xlab("Year") +
ylab("Jail Population") +
ggtitle("Jail Populations in Georgia") +
theme(plot.title = element_text(hjust=0.5)) +
scale_color_manual(name = "Race", labels = c("Black", "Other", "White"),
values = c('firebrick', 'cornflowerblue', 'darkseagreen4'))
View(jail_pop)
View(jail_pop)
chart2_df <- jail_pop %>%
filter(state == "GA") %>%
select(female_jail_pop, male_jail_pop, white_jail_pop, black_jail_pop) %>%
drop_na()
chart2_df <- jail_pop %>%
filter(state == "GA") %>%
select(female_jail_pop, male_jail_pop, white_jail_pop, black_jail_pop) %>%
drop_na()
# Load packages
library(tidyverse)
library(dplyr)
# Load datasets
prison_pop <- read.csv('https://github.com/melaniewalsh/Neat-Datasets/blob/main/us-prison-pop.csv?raw=true')
jail_pop <- read.csv('https://github.com/melaniewalsh/Neat-Datasets/blob/main/us-jail-pop.csv?raw=true')
pop_rate_100k <- read.csv('https://github.com/melaniewalsh/Neat-Datasets/blob/main/us-prison-jail-rates.csv?raw=true')
# Load packages
library(tidyverse)
library(dplyr)
# Load datasets
prison_pop <- read.csv('https://github.com/melaniewalsh/Neat-Datasets/blob/main/us-prison-pop.csv?raw=true')
jail_pop <- read.csv('https://github.com/melaniewalsh/Neat-Datasets/blob/main/us-jail-pop.csv?raw=true')
pop_rate_100k <- read.csv('https://github.com/melaniewalsh/Neat-Datasets/blob/main/us-prison-jail-rates.csv?raw=true')
# Note:
#   Jail holds people awaiting trial/sentencing
#   Prisons house people who have been convicted of a crime
# Calculating 5 summary values
# The state with the largest jail population within urban communities
# from years 2000-2018
high_urban_state_jail_pop <- jail_pop %>%
filter(year > 2000, urbanicity == "urban") %>%
filter(total_jail_pop == max(total_jail_pop, na.rm = TRUE)) %>%
pull(state)
# Convert abbreviation to state name
high_urban_state_jail_pop <- state.name[match(high_urban_state_jail_pop, state.abb)]
# The state with the largest jail population within rural communities
# from years 2000-2018
high_rural_state_jail_pop <- jail_pop %>%
filter(year > 2000, urbanicity == "rural") %>%
filter(total_jail_pop == max(total_jail_pop, na.rm = TRUE)) %>%
pull(state)
# Convert abbreviation to state name
high_rural_state_jail_pop <- state.name[match(high_rural_state_jail_pop, state.abb)]
# The highest reported black and white jail population within the 2000s in Texas
high_black_jail_pop <- jail_pop %>%
filter(year > 2000, state == "TX") %>%
filter(black_jail_pop == max(black_jail_pop, na.rm = TRUE)) %>%
pull(black_jail_pop)
high_white_jail_pop <- jail_pop %>%
filter(year > 2000, state == "TX") %>%
filter(white_jail_pop == max(white_jail_pop, na.rm = TRUE)) %>%
pull(white_jail_pop)
# The state with largest ratio between black and white populations held in jail
# during 2015 and what the ratio is (B / W)
high_bw_ratio_state <- jail_pop %>%
filter(year == 2015) %>%
mutate(bw_ratio = black_jail_pop / white_jail_pop) %>%
filter(!is.infinite(bw_ratio)) %>%
filter(bw_ratio == max(bw_ratio, na.rm = TRUE)) %>%
pull(state)
# Convert abbreviation to state name
high_bw_ratio_state <- state.name[match(high_bw_ratio_state, state.abb)]
high_bw_ratio <- jail_pop %>%
filter(year == 2015) %>%
select(state, black_jail_pop, white_jail_pop) %>%
mutate(bw_ratio = black_jail_pop / white_jail_pop) %>%
filter(bw_ratio == max(bw_ratio, na.rm = TRUE)) %>%
pull(bw_ratio)
# The state with largest juvenile jail population (male and female)
# within the 2000s
high_juvenile_pop <- jail_pop %>%
filter(year > 2000) %>%
select(state, female_juvenile_jail_pop, male_juvenile_jail_pop) %>%
mutate(total_juvenile_pop = female_juvenile_jail_pop +
male_juvenile_jail_pop) %>%
filter(total_juvenile_pop == max(total_juvenile_pop, na.rm = TRUE)) %>%
pull(state)
# Convert abbreviation to state name
high_juvenile_pop <- state.name[match(high_juvenile_pop, state.abb)]
# Load packages
library(ggplot2)
# Clean data
chart_df <- jail_pop %>%
# Focus on Georgia as they have comparable black and white populations
filter(state == "GA", year > 2000) %>%
mutate(other_jail_pop = aapi_jail_pop + native_jail_pop + latinx_jail_pop + other_race_jail_pop) %>%
# Choose columns of white, black, aapi, and native jail pop.
select(year, white_jail_pop, black_jail_pop, other_jail_pop) %>%
# Dropping NA values as they can affect the graph
drop_na()
# Sum the jail populations from all counties in GA
chart_df <- chart_df %>%
group_by(year) %>%
summarise(across(c(white_jail_pop, black_jail_pop, other_jail_pop), sum))
# Combine columns into one column (groups)
chart_df <- chart_df %>%
pivot_longer(cols=c('white_jail_pop', 'black_jail_pop',
'other_jail_pop'),
names_to='race',
values_to='pop')
# Plot data
ggplot(data = chart_df, aes(x = year, y = pop, group = race)) +
geom_line(aes(color = race), linewidth = 0.7) +
xlab("Year") +
ylab("Jail Population") +
ggtitle("Jail Populations in Georgia") +
theme(plot.title = element_text(hjust=0.5)) +
scale_color_manual(name = "Race", labels = c("Black", "Other", "White"),
values = c('firebrick', 'cornflowerblue', 'darkseagreen4'))
chart2_df <- jail_pop %>%
filter(state == "GA") %>%
select(female_jail_pop, male_jail_pop, white_jail_pop, black_jail_pop) %>%
drop_na()
View(chart2_df)
chart2_df <- jail_pop %>%
filter(state == "GA") %>%
select(female_jail_pop, male_jail_pop, white_jail_pop, black_jail_pop, year) %>%
drop_na()
View(chart_df)
View(jail_pop)
View(chart2_df)
chart2_df <- chart2_df %>%
group_by(year) %>%
summarise(across(c(white_jail_pop, black_jail_pop,
female_jail_pop, male_jail_pop), sum))
View(chart2_df)
# Load packages
library(GGally)
install.packages(GGally)
# Load packages
library(plotly)
install.packages(plotly)
"plotly"
install.packages("GGally")
install.packages("plotly")
# Load packages
library(plotly)
library(GGally)
# Clean data
chart2_df <- jail_pop %>%
filter(state == "GA") %>%
select(female_jail_pop, male_jail_pop, white_jail_pop, black_jail_pop, year) %>%
drop_na()
chart2_df <- chart2_df %>%
group_by(year) %>%
summarise(across(c(white_jail_pop, black_jail_pop,
female_jail_pop, male_jail_pop), sum))
ggplot(data = chart2_df) +
ggpairs(columns = 1:4)
ggpairs(chart2_df, columns = 1:4)
ggpairs(chart2_df, columns = 0:3)
ggpairs(chart2_df, columns = 1:3)
ggpairs(chart2_df, columns = 2:4)
ggpairs(chart2_df, columns = 2:5)
chart2_df <- chart2_df %>%
pivot_longer(cols=c('female_jail_pop', 'male_jail_pop'),
names_to='gender',
values_to='white_jail_pop', 'black_jail_pop')
chart2_df <- chart2_df %>%
pivot_longer(cols=c('female_jail_pop', 'male_jail_pop'),
names_to='gender')
# Clean data
chart2_df <- jail_pop %>%
filter(state == "GA") %>%
select(female_jail_pop, male_jail_pop, white_jail_pop, black_jail_pop, year) %>%
drop_na()
# Sum populations over years
chart2_df <- chart2_df %>%
group_by(year) %>%
summarise(across(c(white_jail_pop, black_jail_pop,
female_jail_pop, male_jail_pop), sum))
chart2_df <- chart2_df %>%
pivot_longer(cols=c('female_jail_pop', 'male_jail_pop'),
names_to='gender', values_to = 'pop')
ggpairs(chart2_df, columns = 2:5, ggplot2::aes(color=gender))
ggpairs(chart2_df, columns = 2:4, ggplot2::aes(color=gender))
graph <- ggpairs(chart2_df, columns = 2:4, ggplot2::aes(color=gender))
ggplotly(graph)
ggpairs(chart2_df, columns = 2:4, ggplot2::aes(color=gender))
# Clean data
chart2_df <- jail_pop %>%
filter(state == "GA") %>%
select(female_jail_pop, male_jail_pop, white_jail_pop, black_jail_pop, year) %>%
drop_na()
# Sum populations over years
chart2_df <- chart2_df %>%
group_by(year) %>%
summarise(across(c(white_jail_pop, black_jail_pop,
female_jail_pop, male_jail_pop), sum))
ggpairs(chart2_df, columns = 2:5)
ggpairs(chart2_df, columns = 2:5,
title = "Comparing White/Black and Female/Male Jail Pop.",
columnLabels = c("White", "Black", "Female", "Male"))
# Plot data
ggpairs(chart2_df, columns = 2:5,
title = "Comparing White/Black and Female/Male Jail Pop.",
columnLabels = c("White", "Black", "Female", "Male")) +
theme(plot.title = element_text(hjust = 0.5))
# Clean data
map_df <- jail_pop %>%
filter(year == 2015) %>%
select(year, state, black_jail_pop)
View(graph)
View(map_df)
# Clean data
map_df <- jail_pop %>%
filter(year == 2014) %>%
select(year, state, black_jail_pop)
# Clean data
map_df <- jail_pop %>%
filter(year == 2014) %>%
select(year, state, black_jail_pop) %>%
drop_na()
View(map_df)
# Sum jail populations from all counties within each state
chart_df <- chart_df %>%
group_by(state) %>%
summarise(across(black_jail_pop, sum))
# Sum jail populations from all counties within each state
map_df <- chart_df %>%
group_by(state) %>%
summarise(across(black_jail_pop, sum))
View(map_df)
# Clean data
map_df <- jail_pop %>%
filter(year == 2014) %>%
select(year, state, black_jail_pop) %>%
drop_na()
# Sum jail populations from all counties within each state
map_df <- chart_df %>%
group_by(state) %>%
summarise(across(black_jail_pop, sum))
View(map_df)
# Sum jail populations from all counties within each state
map_df <- map_df %>%
group_by(state) %>%
summarise(across(black_jail_pop, sum))
View(map_df)
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Load packages
library(plot_usmap)
# Load packages
library(usmap)
# Clean data
map_df <- jail_pop %>%
filter(year == 2014) %>%
select(year, state, black_jail_pop) %>%
drop_na()
# Sum jail populations from all counties within each state
map_df <- map_df %>%
group_by(state) %>%
summarise(across(black_jail_pop, sum))
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(name = "Black Jail Pop.") +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
help("scale_fill_continuous")
help("scale_fill_binned")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(name = "Black Jail Pop.", label = scales::comma, na_value = "black") +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(name = "Black Jail Pop.", label = scales::comma, na_values = "black") +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
help(plot_usmap)
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states",
labels = TRUE, label_color = "white") +
scale_fill_continuous(name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(low = "white", high = "dodgerblue4",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(low = "cornflowerblue", high = "dodgerblue4",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(low = "dodgerblue", high = "dodgerblue4",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(low = "cornflowerblue", high = "black",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(low = "lightblue1", high = "lightblue4",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(low = "lightblue1", high = "lightblue4", na_values = "black"
name = "Black Jail Pop.", label = scales::comma) +
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(low = "lightblue1", high = "lightblue4",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(low = "lightblue1", high = "lightblue4",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right", title = "Black Jail Populations in US (2014)")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
scale_fill_continuous(low = "lightblue1", high = "lightblue4",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right", title = 'Black Jail Populations in US (2014)')
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states",
title = "Black Jail Populations in US (2014)") +
scale_fill_continuous(low = "lightblue1", high = "lightblue4",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
plot_usmap
help(plot_usmap)
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
labs(title = "Black Jail Populations in US (2014)")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
labs(title = "Black Jail Populations in US (2014)") +
scale_fill_continuous(low = "lightblue1", high = "lightblue4",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right")
# Plot data
plot_usmap(data = map_df, values = "black_jail_pop", regions = "states") +
labs(title = "Black Jail Populations in US (2014)") +
scale_fill_continuous(low = "lightblue1", high = "lightblue4",
name = "Black Jail Pop.", label = scales::comma) +
theme(legend.position = "right", plot.title = element_text(hjust = 0.5))
help(theme)
knit_with_parameters("~/info201/assignment-04-reollei/index.Rmd")
install.packages("knitr")
install.packages("knitr")
knitr::opts_chunk$set(echo = TRUE)
library(knitr)
library(tidyverse)
library(dplyr)
library(plotly)
library(GGally)
library(usmap)
source("summary.R")
source("chart1_example.R")
plot(plot1)
source("chart2_example.R")
plot(plot2)
source("chart2_example.R")
print(plot2)
source("map_example.R")
plot(map)
ggplot(map_df, aes(fill = black_jail_population)) +
geom_df() +
scale_fill_gradientn(colours=rev(magma(6)))
# US map of black jail populations in 2015
library(ggplot2)
# Clean data
map_df <- jail_pop %>%
filter(year == 2014) %>%
select(year, state, black_jail_pop) %>%
drop_na()
library(tidyverse)
library(dplyr)
# Clean data
map_df <- jail_pop %>%
filter(year == 2014) %>%
select(year, state, black_jail_pop) %>%
drop_na()
# Sum jail populations from all counties within each state
map_df <- map_df %>%
group_by(state) %>%
summarise(across(black_jail_pop, sum))
ggplot(map_df, aes(fill = black_jail_population)) +
geom_df() +
scale_fill_gradientn(colours=rev(magma(6)))
ggplot(map_df, aes(fill = black_jail_population)) +
geom_sf() +
scale_fill_gradientn(colours=rev(magma(6)))
library(viridis)
install.packages(viridis)
install.packages("viridis")
library(viridis)
ggplot(map_df, aes(fill = black_jail_population)) +
geom_sf() +
scale_fill_gradientn(colours=rev(magma(6)))
ggplot(map_df, aes(fill = black_jail_population)) +
scale_fill_gradientn(colours=rev(magma(6)))
ggplot(map_df, aes(fill = black_jail_pop)) +
scale_fill_gradientn(colours=rev(magma(6)))
ggplot(map_df) +
geom_sf(aes(fill = black_jail_pop))
install.packages("sf")
library(sf)
ggplot(map_df) +
geom_sf(aes(fill = black_jail_pop))
library(maps)
ggplot(map_df) +
geom_polyson(aes(x=long, y = lat, fill = black_jail_pop))
ggplot(map_df) +
geom_polygon(aes(x=long, y = lat, fill = black_jail_pop))
# Sum jail populations from all counties within each state
map_df <- map_df %>%
group_by(state) %>%
summarise(across(black_jail_pop, sum))
View(map_df)
state <- data("usa")
state <- map_data("state")
View(state)
state$region <- state.abb[match(state$region, state.name)]
View(state)
state <- map_data("state")
state$region <- state.abb[match(state$region, to_lower(state.name))]
state$region <- state.abb[match(state$region, tolower(state.name))]
View(state)
map_df_temp <- left_join(map_df, state)
map_df <- map_df %>%
rename("state" = "region")
View(map_df)
map_df <- map_df %>%
rename("region" = "state")
View(map_df)
map_df_temp <- left_join(map_df, state)
View(map_df_temp)
ggplot(map_df) +
geom_polygon(aes(x = long, y = lat, group = group, fill = black_jail_pop))
ggplot(map_df_temp) +
geom_polygon(aes(x = long, y = lat, group = group, fill = black_jail_pop))
help("merge")
library(tidyverse)
library(dplyr)
library(ggplot2)
library(maps)
temp_city <- read.csv('https://www.kaggle.com/datasets/berkeleyearth/climate-change-earth-surface-temperature-data?select=GlobalLandTemperaturesByCity.csv')
# US map of black jail populations in 2015
library(ggplot2)
library(tidyverse)
library(dplyr)
library(maps)
# Clean data
map_df <- jail_pop %>%
filter(year == 2014) %>%
select(year, state, black_jail_pop) %>%
drop_na()
# Sum jail populations from all counties within each state
map_df <- map_df %>%
group_by(state) %>%
summarise(across(black_jail_pop, sum))
state <- map_data("state")
state$region <- state.abb[match(state$region, tolower(state.name))]
map_df <- map_df %>%
rename("region" = "state")
map_df_temp <- left_join(map_df, state)
ggplot(map_df_temp) +
geom_polygon(aes(x = long, y = lat, group = group, fill = black_jail_pop))
ggplot(map_df_temp, aes(x = long, y = lat, group = group, fill = black_jail_pop)) +
geom_polygon()
